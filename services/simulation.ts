import { Character, SimulationResult, CharacterUpdate, Gender, MBTI } from "../types";

// MBTI Groupings for compatibility logic
const ANALYSTS = ['INTJ', 'INTP', 'ENTJ', 'ENTP'];
const DIPLOMATS = ['INFJ', 'INFP', 'ENFJ', 'ENFP'];
const SENTINELS = ['ISTJ', 'ISFJ', 'ESTJ', 'ESFJ'];
const EXPLORERS = ['ISTP', 'ISFP', 'ESTP', 'ESFP'];

const GLOBAL_EVENTS = [
    // Existing
    "ì˜¤ëŠ˜ì€ ì•ˆê°œê°€ ì§™ê²Œ ë¼ì—ˆìŠµë‹ˆë‹¤. ì¢€ë¹„ë“¤ì˜ ì‹ ìŒì†Œë¦¬ê°€ ê°€ê¹Œì´ì—ì„œ ë“¤ë¦½ë‹ˆë‹¤.",
    "í­ìš°ê°€ ìŸì•„ì ¸ ì‹œì•¼ê°€ í™•ë³´ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëª¨ë‘ê°€ ìº í”„ ì•ˆì— ë¨¸ë¬¼ëŸ¬ì•¼ í•©ë‹ˆë‹¤.",
    "ë§‘ì€ ë‚ ì”¨ì§€ë§Œ, ì‹ëŸ‰ì´ ë°”ë‹¥ë‚˜ê³  ìˆìŠµë‹ˆë‹¤. ëˆ„êµ°ê°€ëŠ” ë°–ìœ¼ë¡œ ë‚˜ê°€ì•¼ í•©ë‹ˆë‹¤.",
    "ë²„ë ¤ì§„ ì‡¼í•‘ëª°ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ìœ„í—˜í•´ ë³´ì´ì§€ë§Œ ë¬¼ìëŠ” í’ë¶€í•´ ë³´ì…ë‹ˆë‹¤.",
    "ë°¤ìƒˆ ì¢€ë¹„ ë–¼ê°€ ìº í”„ ì£¼ë³€ì„ ë°°íšŒí–ˆìŠµë‹ˆë‹¤. ëª¨ë‘ê°€ ì ì„ ì„¤ì³¤ìŠµë‹ˆë‹¤.",
    "ë¼ë””ì˜¤ì—ì„œ ëŠì–´ì§€ëŠ” êµ¬ì¡° ì‹ í˜¸ê°€ ì¡í˜”ìŠµë‹ˆë‹¤. í¬ë§ì¼ê¹Œìš”, í•¨ì •ì¼ê¹Œìš”?",
    "ì¡°ìš©í•œ í•˜ë£¨ì…ë‹ˆë‹¤. í­í’ì „ì•¼ ê°™ì€ ê³ ìš”í•¨ì´ íë¦…ë‹ˆë‹¤.",
    "ë©€ë¦¬ì„œ ì´ì†Œë¦¬ê°€ ë“¤ë ¸ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ìƒì¡´ìë“¤ì¼ê¹Œìš”? ì•„ë‹ˆë©´ ì•½íƒˆìë“¤ì¼ê¹Œìš”?",
    "ì‹ìˆ˜ì›ì´ ì˜¤ì—¼ëœ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì •ìˆ˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
    "ì—„ì²­ë‚œ ë”ìœ„ê°€ ì°¾ì•„ì™”ìŠµë‹ˆë‹¤. íƒˆìˆ˜ ì¦ì„¸ê°€ ê±±ì •ë©ë‹ˆë‹¤.",
    "ëˆˆì´ ë‚´ë¦¬ê¸° ì‹œì‘í•©ë‹ˆë‹¤. ì¶”ìœ„ì™€ì˜ ì‹¸ì›€ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.",
    "ê¹Œë§ˆê·€ë“¤ì´ ë–¼ì§€ì–´ ë‚ ì•„ê°‘ë‹ˆë‹¤. ë¶ˆê¸¸í•œ ì§•ì¡°ì…ë‹ˆë‹¤.",
    "ì˜¤ë˜ëœ êµ°ì‚¬ íŠ¸ëŸ­ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ì“¸ë§Œí•œ ì¥ë¹„ê°€ ìˆì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.",
    "ì•¼ìƒ ë™ë¬¼ì˜ í”ì ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ì‚¬ëƒ¥ê°ì¼ê¹Œìš”, í¬ì‹ìì¼ê¹Œìš”?",
    "ì•½êµ­ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. í•­ìƒì œì™€ ë¶•ëŒ€ë¥¼ ì±™ê¸¸ ê¸°íšŒì…ë‹ˆë‹¤.",
    "ìº í”„ ê·¼ì²˜ì—ì„œ ìˆ˜ìƒí•œ ë°œìêµ­ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. ëˆ„êµ°ê°€ ìš°ë¦´ ê°ì‹œí•˜ê³  ìˆìŠµë‹ˆë‹¤.",
    "ë³´ë¦„ë‹¬ì´ ë–´ìŠµë‹ˆë‹¤. ì™ ì§€ ì¢€ë¹„ë“¤ì´ í‰ì†Œë³´ë‹¤ ë” ì‚¬ë‚˜ì›Œ ë³´ì…ë‹ˆë‹¤.",
    "ê°•í•œ ë°”ëŒì´ ë¶ˆì–´ ë°”ë¦¬ì¼€ì´ë“œ ì¼ë¶€ê°€ ë¬´ë„ˆì¡ŒìŠµë‹ˆë‹¤. ê¸´ê¸‰ ë³´ìˆ˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
    "ì˜¤ë˜ëœ ë„ì„œê´€ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤. ìƒì¡´ ì§€ì¹¨ì„œë¥¼ êµ¬í•  ìˆ˜ ìˆì„ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.",
    "ëˆ„êµ°ê°€ ì‹¤ìˆ˜ë¡œ í° ì†Œë¦¬ë¥¼ ëƒˆìŠµë‹ˆë‹¤. ê³§ ì¢€ë¹„ë“¤ì´ ëª°ë ¤ì˜¬ ê²ƒì…ë‹ˆë‹¤.",
    "í•˜ëŠ˜ì— í—¬ë¦¬ì½¥í„°ê°€ ì§€ë‚˜ê°€ëŠ” ê²ƒì´ ë³´ì˜€ìŠµë‹ˆë‹¤. êµ¬ì¡° ìš”ì²­ì„ ë³´ë‚´ê¸°ì—” ë„ˆë¬´ ë©€ì—ˆìŠµë‹ˆë‹¤.",
    "ì©ì€ ëƒ„ìƒˆê°€ ì§„ë™ì„ í•©ë‹ˆë‹¤. ê·¼ì²˜ì— ëŒ€ê·œëª¨ ì‹œì²´ ë¬´ë”ê¸°ê°€ ìˆëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.",
    "ë²„ë ¤ì§„ ë†€ì´ê³µì›ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤. ê¸°ê´´í•œ ìŒì•… ì†Œë¦¬ê°€ ëŠê²¨ì„œ ë“¤ë¦½ë‹ˆë‹¤.",
    "ì‹ëŸ‰ ì°½ê³ ì—ì„œ ì¥ ë–¼ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹ëŸ‰ ì¼ë¶€ë¥¼ ë²„ë ¤ì•¼ í•©ë‹ˆë‹¤.",
    "ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì§€ì§„ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ê±´ë¬¼ì´ í”ë“¤ë¦¬ê³  ëª¨ë‘ê°€ ë„˜ì–´ì¡ŒìŠµë‹ˆë‹¤.",
    "ìˆ²ì—ì„œ ì •ì²´ë¶ˆëª…ì˜ ì—´ë§¤ë¥¼ ê°€ë“ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ë¨¹ì„ ìˆ˜ ìˆì„ì§€ ê³ ë¯¼ì…ë‹ˆë‹¤.",
    "ì£½ì€ ì¤„ ì•Œì•˜ë˜ ì¢€ë¹„ í•˜ë‚˜ê°€ ê°‘ìê¸° ìº í”„ ì•ˆì—ì„œ ì¼ì–´ë‚˜ ì†Œë™ì´ ë²Œì–´ì¡ŒìŠµë‹ˆë‹¤.",
    "ë¼ë””ì˜¤ì—ì„œ 70-80ë…„ëŒ€ ìŒì•…ì´ í˜ëŸ¬ë‚˜ì˜µë‹ˆë‹¤. ëˆ„êµ°ê°€ì˜ ì¥ë‚œì¼ê¹Œìš”?",
    "ë¹„ê°€ ê·¸ì¹˜ê³  ë¬´ì§€ê°œê°€ ë–´ìŠµë‹ˆë‹¤. ì ì‹œë‚˜ë§ˆ í‰í™”ë¡œìš´ ê¸°ë¶„ì„ ëŠë‚ë‹ˆë‹¤.",
    "ë‚¡ì€ ìº í•‘ì¹´ë¥¼ ë°œê²¬í–ˆì§€ë§Œ ê¸°ë¦„ì´ ì—†ì–´ ì›€ì§ì¼ ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤.",
    "ì •ì²´ë¶ˆëª…ì˜ ê·¸ë¦¼ìê°€ ìº í”„ ì£¼ë³€ì„ ë§´ëŒë‹¤ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤.",
    "ëˆ„êµ°ê°€ ë‚¨ê¸´ 'ìƒì¡´ì ìˆìŒ' í‘œì§€íŒì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. í¬ë§ì„ ê°€ì ¸ë´…ë‹ˆë‹¤.",
    "ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì†Œë‚˜ê¸°ë¡œ ì‹ìˆ˜ë¥¼ ë³´ì¶©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.",
    "ìˆ²ì—ì„œ ì¢€ë¹„ê°€ ë«ì— ê±¸ë ¤ ìˆëŠ” ê²ƒì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ëˆ„êµ°ê°€ ê·¼ì²˜ì— ìˆìŠµë‹ˆë‹¤.",
    "ëª¨ë‹¥ë¶ˆ ì£¼ë³€ì— ëª¨ì—¬ ë¬´ì„œìš´ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ„ë©° ê¸´ì¥ì„ í’€ì—ˆìŠµë‹ˆë‹¤.",
    "ë‚¡ì€ ê¸°íƒ€ í•˜ë‚˜ë¡œ ì‘ì€ ìŒì•…íšŒê°€ ì—´ë ¸ìŠµë‹ˆë‹¤.",
    "ì¢€ë¹„ ë–¼ê°€ ì„œë¡œ ì—‰ì¼œ ê±°ëŒ€í•œ ë©ì–´ë¦¬ê°€ ëœ ê²ƒì„ ë³´ê³  ë„ë§ì³¤ìŠµë‹ˆë‹¤.",
    "ì˜¤ë˜ëœ ë§Œí™”ì±…ì„ ë°œê²¬í•´ ëŒë ¤ë³´ë©° ì ì‹œ ì›ƒì—ˆìŠµë‹ˆë‹¤.",
    "ì•ˆê°œê°€ ë„ˆë¬´ ì§™ì–´ ë°”ë¡œ ì•ë„ ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤. ì„œë¡œì˜ ì†ì„ ì¡ê³  ì´ë™í•´ì•¼ í•©ë‹ˆë‹¤.",
    "ë²„ë ¤ì§„ ê²½ì°°ì„œë¥¼ ë°œê²¬í–ˆì§€ë§Œ, ì´ë¯¸ ëˆ„êµ°ê°€ ë‹¤ë…€ê°„ í”ì ì´ ìˆìŠµë‹ˆë‹¤.",
    "í•˜ìˆ˜êµ¬ì—ì„œ ì´ìƒí•œ ì†Œë¦¬ê°€ ë“¤ë ¤ì˜µë‹ˆë‹¤. ì ‘ê·¼í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤.",
    "ì•¼ìƒ ë“¤ê°œ ë¬´ë¦¬ê°€ ë‚˜íƒ€ë‚˜ ì‹ëŸ‰ì„ ë…¸ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.",
    "ë°¤í•˜ëŠ˜ì— ìœ ì„±ì´ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤. ì†Œì›ì„ ë¹ˆ ì‚¬ëŒì€ ì•„ë¬´ë„ ì—†ì—ˆìŠµë‹ˆë‹¤."
];

// Helper to get pronoun based on gender (Korean nuance)
const getPronoun = (gender: Gender) => {
    if (gender === 'Male') return 'ê·¸';
    if (gender === 'Female') return 'ê·¸ë…€';
    return 'ê·¸ë“¤';
};

interface ActionEffect {
    text: string;
    hp?: number;
    sanity?: number;
    kill?: number;
}

// Interaction Templates
const INTERACTION_TEMPLATES = {
    POSITIVE: [
        (a: string, b: string) => `${a}ì™€(ê³¼) ${b}ì€(ëŠ”) ì„œë¡œì˜ ë“±ì„ ì§€ì¼œì£¼ë©° ì‹ ë¢°ë¥¼ ìŒ“ì•˜ìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì—ê²Œ ìì‹ ì˜ ë¹„ìƒ ì‹ëŸ‰ì„ ë‚˜ëˆ ì£¼ì—ˆìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì™€(ê³¼) ${b}ì€(ëŠ”) ì˜›ë‚  ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ„ë©° ê¹Šì€ ìœ ëŒ€ê°ì„ ëŠê¼ˆìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì€(ëŠ”) ìœ„í—˜ì— ì²˜í•œ ${b}ì„(ë¥¼) ê°„ë°œì˜ ì°¨ë¡œ êµ¬í–ˆìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì™€(ê³¼) ${b}ì€(ëŠ”) í•¨ê»˜ ë³´ì´ˆë¥¼ ì„œë©° ì„œë¡œì— ëŒ€í•´ ë” ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì˜ ìƒì²˜ë¥¼ ì •ì„±ê» ì¹˜ë£Œí•´ì£¼ì—ˆìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì™€(ê³¼) ${b}ì€(ëŠ”) ë¯¸ë˜ì— ëŒ€í•œ í¬ë§ì„ ì´ì•¼ê¸°í•˜ë©° ì„œë¡œë¥¼ ê²©ë ¤í–ˆìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì´(ê°€) í˜ë“¤ì–´í•˜ëŠ” ê²ƒì„ ë³´ê³  ì¡°ìš©íˆ ë„ì™€ì£¼ì—ˆìŠµë‹ˆë‹¤.`
    ],
    NEGATIVE: [
        (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì˜ ë°©ì‹ì´ ë§ˆìŒì— ë“¤ì§€ ì•Šì•„ ì–¸ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì˜ ë¬´ëª¨í•œ í–‰ë™ì„ ë¹„ë‚œí•˜ë©° í™”ë¥¼ ëƒˆìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì™€(ê³¼) ${b}ì€(ëŠ”) ì´ë™ ê²½ë¡œë¥¼ ë‘ê³  ì‹¬í•˜ê²Œ ë‹¤íˆ¬ì—ˆìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì´(ê°€) ì‹ëŸ‰ì„ í›”ì³¤ë‹¤ê³  ì˜ì‹¬í–ˆìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì˜ íƒœë„ê°€ ë§ˆìŒì— ë“¤ì§€ ì•Šì•„ ì°¨ê°‘ê²Œ ëŒ€í–ˆìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì™€(ê³¼) ${b} ì‚¬ì´ì—ëŠ” ìˆ¨ë§‰íˆëŠ” ì¹¨ë¬µë§Œì´ í˜ë €ìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì˜ ì‹¤ìˆ˜ ë•Œë¬¸ì— ìœ„í—˜ì— ì²˜í•  ë»”í–ˆë‹¤ë©° íƒ“í–ˆìŠµë‹ˆë‹¤.`,
        (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì˜ ì´ê¸°ì ì¸ íƒœë„ì— ì‹¤ë§ê°ì„ ê°ì¶”ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.`
    ]
};

const LOVER_EVENTS = [
    (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì—ê²Œ ëª°ë˜ ìˆ¨ê²¨ë‘” ì´ˆì½œë¦¿ì„ ì£¼ë©° ì‚¬ë‘ì„ ì†ì‚­ì˜€ìŠµë‹ˆë‹¤.`,
    (a: string, b: string) => `${a}ì™€(ê³¼) ${b}ì€(ëŠ”) ì¢€ë¹„ ë–¼ë¥¼ í”¼í•´ ìˆ¨ì€ ê³³ì—ì„œ ì†ì„ ê¼­ ì¡ê³  ìˆì—ˆìŠµë‹ˆë‹¤.`,
    (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì„(ë¥¼) ìœ„í•´ ìì‹ ì˜ ëª©ìˆ¨ì„ ê±¸ê³  ì•½ì„ êµ¬í•´ì™”ìŠµë‹ˆë‹¤.`,
    (a: string, b: string) => `${a}ì™€(ê³¼) ${b}ì€(ëŠ”) ì„¸ìƒì´ ëë‚˜ë”ë¼ë„ í•¨ê»˜í•˜ìê³  ì•½ì†í–ˆìŠµë‹ˆë‹¤.`,
    (a: string, b: string) => `${a}ì€(ëŠ”) ì•…ëª½ì„ ê¾¸ëŠ” ${b}ì„(ë¥¼) ë°¤ìƒˆ ì•ˆì•„ì£¼ì—ˆìŠµë‹ˆë‹¤.`,
    (a: string, b: string) => `${a}ì™€(ê³¼) ${b}ì€(ëŠ”) íí—ˆ ì†ì—ì„œ ë‘˜ë§Œì˜ ì‘ì€ ê²°í˜¼ì‹ì„ ìƒìƒí–ˆìŠµë‹ˆë‹¤.`
];

const CONFESSION_EVENTS = [
    (a: string, b: string) => `${a}ì€(ëŠ”) ë–¨ë¦¬ëŠ” ëª©ì†Œë¦¬ë¡œ ${b}ì—ê²Œ ì¢‹ì•„í•œë‹¤ê³  ê³ ë°±í–ˆìŠµë‹ˆë‹¤!`,
    (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì—ê²Œ ê½ƒì„ ê±´ë„¤ë©° ë§ˆìŒì„ ì „í–ˆìŠµë‹ˆë‹¤.`,
    (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì—ê²Œ "ë„ˆ ì—†ì´ëŠ” ì‚´ ìˆ˜ ì—†ì–´"ë¼ê³  ë§í–ˆìŠµë‹ˆë‹¤.`
];

const BREAKUP_EVENTS = [
    (a: string, b: string) => `${a}ì™€(ê³¼) ${b}ì€(ëŠ”) ê·¹ì‹¬í•œ ìŠ¤íŠ¸ë ˆìŠ¤ë¡œ ì¸í•´ ì„œë¡œì—ê²Œ ì”»ì„ ìˆ˜ ì—†ëŠ” ìƒì²˜ë¥¼ ì£¼ê³  í—¤ì–´ì¡ŒìŠµë‹ˆë‹¤.`,
    (a: string, b: string) => `${a}ì€(ëŠ”) ${b}ì˜ ì´ê¸°ì ì¸ í–‰ë™ì— ì§ˆë ¤ ì´ë³„ì„ í†µë³´í–ˆìŠµë‹ˆë‹¤.`,
    (a: string, b: string) => `${a}ì™€(ê³¼) ${b}ì˜ ì‚¬ë‘ì€ ì¢€ë¹„ ì•„í¬ì¹¼ë¦½ìŠ¤ì˜ í˜„ì‹¤ ì•ì—ì„œ ë¬´ë„ˆì ¸ ë‚´ë ¸ìŠµë‹ˆë‹¤.`
];

// Detailed actions for each of the 16 MBTI types
const MBTI_SPECIFIC_ACTIONS: Record<MBTI, (name: string, gender: Gender) => ActionEffect> = {
    // Analysts (ë¶„ì„ê°€í˜•)
    INTJ: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ì¥ê¸° ìƒì¡´ì„ ìœ„í•œ ë§ˆìŠ¤í„°í”Œëœì„ ìˆ˜ë¦½í•˜ê³  ë¹„ìƒ ì‹ëŸ‰ì„ ìˆ¨ê²¼ìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ë¹„íš¨ìœ¨ì ì¸ ë°”ë¦¬ì¼€ì´ë“œë¥¼ ëœ¯ì–´ê³ ì¹˜ë‹¤ ì†ì„ ë‹¤ì³¤ì§€ë§Œ ë°©ì–´ë ¥ì€ ì˜¬ëìŠµë‹ˆë‹¤.`, hp: -2, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ${p}ì˜ ëƒ‰ì² í•œ íŒë‹¨ìœ¼ë¡œ í•¨ì •ì„ ë¯¸ë¦¬ ê°ì§€í•˜ê³  í”¼í•´ê°”ìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°€ì§€ë©° ë³µì¡í•œ ë¨¸ë¦¿ì†ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ë“¤ì˜ ì´ë™ íŒ¨í„´ì—ì„œ ê·œì¹™ì„±ì„ ë°œê²¬í•˜ê³  ê¸°ë¡í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ë™ë£Œë“¤ì˜ ê°ì •ì ì¸ ê²°ì •ì´ ìƒì¡´ì— ë°©í•´ê°€ ëœë‹¤ê³  ë¹„íŒí–ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ë¹—ë¬¼ì„ íš¨ìœ¨ì ìœ¼ë¡œ ëª¨ìœ¼ëŠ” ì •ìˆ˜ ì‹œìŠ¤í…œì„ ê³ ì•ˆí•´ëƒˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì²´ìŠ¤ ë§ì„ ê¹ì•„ ë§Œë“¤ë©° ë‹¤ìŒ ìˆ˜ë¥¼ ìƒê°í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì ì„ ì¤„ì—¬ê°€ë©° íƒˆì¶œìš© ì§€ë„ë¥¼ ì™„ë²½í•˜ê²Œ ì•”ê¸°í–ˆìŠµë‹ˆë‹¤.`, hp: -5, sanity: 5 },
            { text: `${name}ì€(ëŠ”) "ëª¨ë“  ê²ƒì€ ê³„íšëŒ€ë¡œì•¼"ë¼ê³  ì¤‘ì–¼ê±°ë ¸ìŠµë‹ˆë‹¤.` },
            // Added
            { text: `${name}ì€(ëŠ”) ë¹„ìƒ ì‚¬íƒœë¥¼ ëŒ€ë¹„í•´ í”Œëœ Dê¹Œì§€ ì„¸ì› ìŠµë‹ˆë‹¤.`, sanity: 2 },
            { text: `${name}ì€(ëŠ”) ë‚¨ë“¤ì´ ë³´ì§€ ëª»í•œ íƒˆì¶œ ë£¨íŠ¸ë¥¼ ë°œê²¬í•˜ê³  ì¡°ìš©íˆ ë¯¸ì†Œ ì§€ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ê°ì •ì— íœ©ì“¸ë¦¬ëŠ” ë™ë£Œë¥¼ ë³´ë©° ê³ ê°œë¥¼ ì €ì—ˆìŠµë‹ˆë‹¤.` }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },
    INTP: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ ë°”ì´ëŸ¬ìŠ¤ì˜ ì›ì¸ì— ëŒ€í•´ ê¹Šê²Œ ê³ ì°°í•˜ë‹¤ ë¶ˆì¹¨ë²ˆ ì‹œê°„ì„ ë†“ì³¤ìŠµë‹ˆë‹¤.`, sanity: -5 },
            { text: `${name}ì€(ëŠ”) ì¡ë™ì‚¬ë‹ˆë¥¼ ëª¨ì•„ ê¸°ë°œí•œ ì „ê¸° ì¶©ê²© í•¨ì •ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.`, kill: 1, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ì˜ í–‰ë™ ì–‘ì‹ì„ ê´€ì°°í•˜ë ¤ë‹¤ ë„ˆë¬´ ê°€ê¹Œì´ ë‹¤ê°€ê°€ ê³µê²©ë‹¹í–ˆìŠµë‹ˆë‹¤.`, hp: -10 },
            { text: `${name}ì€(ëŠ”) ì§€ë„ì—ì„œ ëª¨ìˆœì ì„ ë°œê²¬í•˜ê³  ë” ì•ˆì „í•œ ê²½ë¡œë¥¼ ê³„ì‚°í•´ëƒˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ì“¸ëª¨ì—†ì–´ ë³´ì´ëŠ” ê¸°ê³„ë¥¼ ë¶„í•´í•˜ì—¬ ìœ ìš©í•œ ë¶€í’ˆì„ ì–»ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ë„ êµ¶ì–´ ì£½ì„ê¹Œì— ëŒ€í•œ ê°€ì„¤ì„ ì„¸ìš°ëŠë¼ ì‹ì‚¬í•˜ëŠ” ê²ƒì„ ìŠì—ˆìŠµë‹ˆë‹¤.`, hp: -5 },
            { text: `${name}ì€(ëŠ”) ë³µì¡í•œ ì•”í˜¸ë¡œ ì ê¸´ ë¬¸ì„ í•´ì œí•˜ëŠ” ë° ì„±ê³µí–ˆìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) ë¬´ì „ê¸°ë¥¼ ê°œì¡°í•˜ì—¬ ë” ë¨¼ ê³³ì˜ ì‹ í˜¸ë¥¼ ì¡ìœ¼ë ¤ ì‹œë„í–ˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ê°‘ìê¸° ë– ì˜¤ë¥¸ ì•„ì´ë””ì–´ë¡œ ì¢€ë¹„ ìœ ì¸ìš© ë“œë¡ ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) í˜„ì‹¤ê°ì´ ì—†ì–´ì ¸ ì´ê²ƒì´ ì‹œë®¬ë ˆì´ì…˜ì¸ì§€ ì˜ì‹¬í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.`, sanity: -5 },
            // Added
            { text: `${name}ì€(ëŠ”) "ì´ ìƒí™©ì´ ë…¼ë¦¬ì ìœ¼ë¡œ ë§ì´ ì•ˆ ë¼"ë¼ë©° ë¶„ì„ì„ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ì˜ ì•½ì ì„ íŒŒì•…í•˜ê¸° ìœ„í•´ ìœ„í—˜í•œ ì‹¤í—˜ì„ ê°í–‰í–ˆìŠµë‹ˆë‹¤.`, hp: -5, kill: 2 },
            { text: `${name}ì€(ëŠ”) í˜¼ìë§Œì˜ ì„¸ê³„ì— ë¹ ì ¸ ëˆ„ê°€ ë¶ˆëŸ¬ë„ ë“£ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },
    ENTJ: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ìƒì¡´ìë“¤ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì§€íœ˜í•˜ì—¬ ì™„ë²½í•œ ë°©ì–´ì„ ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ìì› í™•ë³´ë¥¼ ìœ„í•´ ìœ„í—˜í•œ ì›ì •ì„ ê°•í–‰í–ˆìŠµë‹ˆë‹¤.`, hp: -5, kill: 2 },
            { text: `${name}ì€(ëŠ”) ë‚˜ì•½í•œ ì†Œë¦¬ë¥¼ í•˜ëŠ” ë™ë£Œë¥¼ ê°•í•˜ê²Œ ì§ˆì±…í•˜ì—¬ ë¶„ìœ„ê¸°ë¥¼ ì–¼ì–´ë¶™ê²Œ í–ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ìƒˆë¡œìš´ ê±°ì ì„ í™•ë³´í•˜ê¸° ìœ„í•œ ëŒ€ë‹´í•œ ì „ëµì„ ì§°ìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ì—¬ í­ë™ ì¡°ì§ì„ ì‚¬ì „ì— ì œì••í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì“¸ëª¨ì—†ëŠ” ì§ì„ ë²„ë¦¬ê³  ì´ë™ ì†ë„ë¥¼ ë†’ì´ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.`, sanity: 2 },
            { text: `${name}ì€(ëŠ”) ê°ì—¼ ì˜ì‹¬ìë¥¼ ê²©ë¦¬í•´ì•¼ í•œë‹¤ê³  ëƒ‰ì •í•˜ê²Œ ì£¼ì¥í–ˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ì£¼ë³€ ì§€í˜•ì„ ì™„ì „íˆ ì¥ì•…í•˜ê³  ìš”ìƒˆí™” ê³„íšì„ ì„¸ì› ìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì‹ëŸ‰ ë°°ê¸‰ í†µì œê¶Œì„ ì¥ê³  ì² ì €í•˜ê²Œ ê´€ë¦¬í–ˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ì„ ë‘ì— ì„œì„œ ì¢€ë¹„ ë¬´ë¦¬ë¥¼ ëš«ê³  ê¸¸ì„ ì—´ì—ˆìŠµë‹ˆë‹¤.`, hp: -5, kill: 3 },
            // Added
            { text: `${name}ì€(ëŠ”) ë¹„íš¨ìœ¨ì ì¸ í–‰ë™ì„ í•˜ëŠ” ë™ë£Œì—ê²Œ ì—…ë¬´ë¥¼ ì¬ë°°ë‹¹í–ˆìŠµë‹ˆë‹¤.`, sanity: 2 },
            { text: `${name}ì€(ëŠ”) ë¯¸ë˜ë¥¼ ìœ„í•´ ì¸ì¬ ì–‘ì„±ì´ í•„ìš”í•˜ë‹¤ë©° ìƒì¡´ ê¸°ìˆ ì„ ê°€ë¥´ì³¤ìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ìì‹ ì˜ ëª…ë ¹ì— ë¶ˆë³µì¢…í•˜ëŠ” ê²ƒì„ ìš©ë‚©í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.`, sanity: -5 }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },
    ENTP: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ë¥¼ ìœ ì¸í•˜ëŠ” ìœ„í—˜í•˜ì§€ë§Œ ê¸°ë°œí•œ ë°©ë²•ì„ ì‹œí—˜í–ˆìŠµë‹ˆë‹¤.`, hp: -5, kill: 3 },
            { text: `${name}ì€(ëŠ”) ì ˆë§ì ì¸ ìƒí™©ì—ì„œë„ ë†ë‹´ì„ ë˜ì ¸ ë¶„ìœ„ê¸°ë¥¼ í™˜ê¸°í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) "ì¢€ë¹„ë„ ìˆ˜ì˜ì„ í•  ìˆ˜ ìˆì„ê¹Œ?"ë¼ëŠ” ì—‰ëš±í•œ í† ë¡ ì„ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.`, sanity: 2 },
            { text: `${name}ì€(ëŠ”) ì¦‰í¥ì ìœ¼ë¡œ ë§Œë“  ë¬´ê¸°ë¡œ ìœ„ê¸°ë¥¼ ëª¨ë©´í–ˆìŠµë‹ˆë‹¤.`, kill: 1 },
            { text: `${name}ì€(ëŠ”) ê¸°ì¡´ì˜ ìƒì¡´ ìˆ˜ì¹™ì— ì˜ë¬¸ì„ ì œê¸°í•˜ë©° ìƒˆë¡œìš´ ë°©ë²•ì„ ì œì•ˆí–ˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ í•œ ë§ˆë¦¬ë¥¼ ìƒí¬í•´ì„œ ê¸¸ë“¤ì´ë ¤ë‹¤ í˜¼ë‚  ë»”í–ˆìŠµë‹ˆë‹¤.`, sanity: -5 },
            { text: `${name}ì€(ëŠ”) ì ëŒ€ì ì¸ ìƒì¡´ì ê·¸ë£¹ì—ê²Œ ë§ë¹¨ë¡œ ì‚¬ê¸°ë¥¼ ì³ì„œ ë¬¼ìë¥¼ ì–»ì–´ëƒˆìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) í­ë°œë¬¼ì„ ì œì¡°í•˜ì—¬ í™”ë ¤í•œ ë¶ˆê½ƒë†€ì´ë¥¼ ê³„íší–ˆìŠµë‹ˆë‹¤.`, hp: -5, kill: 5 },
            { text: `${name}ì€(ëŠ”) ì•…ë§ˆì˜ ëŒ€ë³€ì¸ ì—­í• ì„ ìì²˜í•˜ë©° íšŒì˜ë¥¼ ê¸¸ì–´ì§€ê²Œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ì´ìƒí•œ ì¬ë£Œë¥¼ ì„ì–´ ìƒˆë¡œìš´ ì—ë„ˆì§€ ë“œë§í¬ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.`, hp: -2 },
            // Added
            { text: `${name}ì€(ëŠ”) ìœ„ê¸° ìƒí™©ì„ ê²Œì„ì²˜ëŸ¼ ì¦ê¸°ë©° ëŒ€ë‹´í•˜ê²Œ í–‰ë™í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì•„ë¬´ë„ ìƒê°í•˜ì§€ ëª»í•œ ê¸°ìƒì²œì™¸í•œ íƒˆì¶œë²•ì„ ìƒê°í•´ëƒˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì§€ë£¨í•˜ë‹¤ë©° ì¼ë¶€ëŸ¬ ìœ„í—˜í•œ ë‚´ê¸°ë¥¼ ì œì•ˆí–ˆìŠµë‹ˆë‹¤.`, hp: -2 }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },

    // Diplomats (ì™¸êµê´€í˜•)
    INFJ: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ì•…ëª½ì„ ê¾¸ì—ˆì§€ë§Œ, ê·¸ê²ƒì´ ë¶ˆê¸¸í•œ ì˜ˆì§€ëª½ì´ë¼ ëŠê¼ˆìŠµë‹ˆë‹¤.`, sanity: -10 },
            { text: `${name}ì€(ëŠ”) ì ˆë§ì— ë¹ ì§„ ë™ë£Œë¥¼ ì¡°ìš©íˆ ìœ„ë¡œí•˜ë©° ìƒë‹´í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) ê·¸ë£¹ì„ ìœ„í•´ ëª°ë˜ ìì‹ ì˜ ëª«ì¸ ì‹ëŸ‰ì„ ì–‘ë³´í–ˆìŠµë‹ˆë‹¤.`, hp: -5, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ê°€ ëœ ì˜› ì´ì›ƒì„ ë³´ê³  ê¹Šì€ ìŠ¬í””ì— ì ê²¼ìŠµë‹ˆë‹¤.`, sanity: -15 },
            { text: `${name}ì€(ëŠ”) ì¸ê°„ì„±ì„ ìƒì§€ ì•Šê¸° ìœ„í•´ ì² í•™ì ì¸ ê³ ë¯¼ì„ í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ë‹¤ê°€ì˜¬ ìœ„ê¸°ë¥¼ ì§ê°í•˜ê³  ë¯¸ë¦¬ í”¼ë‚œ ì§ì„ ìŒŒìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ê·¸ë£¹ ë‚´ì˜ ë³´ì´ì§€ ì•ŠëŠ” ê°ˆë“±ì„ ê°ì§€í•˜ê³  í•´ê²°í•˜ë ¤ ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ìì‹ ì„ í¬ìƒí•´ì„œë¼ë„ ì•„ì´ë“¤ì„ ì§€í‚¤ê² ë‹¤ê³  ë‹¤ì§í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì¡°ìš©í•œ ê³³ì—ì„œ ëª…ìƒì„ í•˜ë©° ë§ˆìŒì„ ë‹¤ìŠ¤ë ¸ìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ëˆ„êµ°ê°€ì˜ ê±°ì§“ë§ì„ ëˆˆì¹˜ì±˜ì§€ë§Œ ëª¨ë¥¸ ì²™ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
            // Added
            { text: `${name}ì€(ëŠ”) ë§í•˜ì§€ ì•Šì•„ë„ ë™ë£Œì˜ ì•„í””ì„ ì•Œì•„ì±„ê³  ê³ì„ ì§€ì¼°ìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì„¸ìƒì´ ë©¸ë§í•´ë„ ì§€ì¼œì•¼ í•  ê°€ì¹˜ê°€ ìˆë‹¤ê³  ë¯¿ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) í˜¼ë€ìŠ¤ëŸ¬ìš´ ìƒí™© ì†ì—ì„œë„ í‰ì •ì‹¬ì„ ìœ ì§€í•˜ë ¤ ì• ì¼ìŠµë‹ˆë‹¤.`, sanity: -2 }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },
    INFP: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) íí—ˆ ì†ì—ì„œë„ í”¼ì–´ë‚œ ê½ƒì„ ë³´ê³  í¬ë§ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) í˜„ì‹¤ì˜ ì°¸í˜¹í•¨ì„ ê²¬ë””ì§€ ëª»í•˜ê³  êµ¬ì„ì— ìˆ¨ì–´ë²„ë ¸ìŠµë‹ˆë‹¤.`, sanity: -5 },
            { text: `${name}ì€(ëŠ”) ë‚¡ì€ ì¼ê¸°ì¥ì— í˜„ì¬ì˜ ê°ì •ì„ ì‹œë¡œ ê¸°ë¡í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ë‹¤ì¹œ ê¸¸ê³ ì–‘ì´ë¥¼ ì¹˜ë£Œí•˜ë ¤ë‹¤ ê¸í˜”ìŠµë‹ˆë‹¤.`, hp: -2 },
            { text: `${name}ì€(ëŠ”) ëª¨ë‘ê°€ í–‰ë³µí•˜ê²Œ ì‚¬ëŠ” ì´ìƒì ì¸ ì€ì‹ ì²˜ë¥¼ ìƒìƒí–ˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ì†Œì¤‘í•œ ë¬¼ê±´ì„ ìƒì–´ë²„ë¦¬ê³  í•˜ë£¨ ì¢…ì¼ ìš°ìš¸í•´í–ˆìŠµë‹ˆë‹¤.`, sanity: -5 },
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ì—ê²Œë„ ì˜í˜¼ì´ ë‚¨ì•„ìˆì„ì§€ ëª¨ë¥¸ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ìˆ²ì†ì˜ ì‘ì€ ì˜¤ë‘ë§‰ì„ ë°œê²¬í•˜ê³  ê·¸ê³³ì—ì„œ ì‚´ê³  ì‹¶ì–´í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì‹¸ì›€ì„ í”¼í•˜ê¸° ìœ„í•´ ìì‹ ì˜ ì˜ê²¬ì„ ìˆ¨ê²¼ìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ìš°ì—°íˆ ë°œê²¬í•œ ì±… í•œ ê¶Œì— ê¹Šì´ ë¹ ì ¸ë“¤ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            // Added
            { text: `${name}ì€(ëŠ”) ì•„ë¬´ë„ ì—†ëŠ” ê³³ì—ì„œ ì¡°ìš©íˆ ëˆˆë¬¼ì„ í˜ë ¸ìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ì•„ë¦„ë‹¤ìš´ ë…¸ì„ì„ ë³´ë©° ì ì‹œ ëª¨ë“  ì‹œë¦„ì„ ìŠì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì‚­ë§‰í•œ ì„¸ìƒì—ì„œë„ ìì‹ ë§Œì˜ ë‚­ë§Œì„ ì°¾ìœ¼ë ¤ í–ˆìŠµë‹ˆë‹¤.` }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },
    ENFJ: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ëª¨ë‘ì˜ ì‚¬ê¸°ë¥¼ ë¶ë‹ìš°ê¸° ìœ„í•´ ì—´ì •ì ì¸ ì—°ì„¤ì„ í–ˆìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) ê°ˆë“±ì´ ìƒê¸´ ìƒì¡´ìë“¤ ì‚¬ì´ë¥¼ ì¤‘ì¬í•˜ì—¬ í™”í•´ì‹œì¼°ìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ë™ë£Œë¥¼ êµ¬í•˜ê¸° ìœ„í•´ ìœ„í—˜ì„ ë¬´ë¦…ì“°ê³  ë›°ì–´ë“¤ì—ˆìŠµë‹ˆë‹¤.`, hp: -15, sanity: 10 },
            { text: `${name}ì€(ëŠ”) ê·¸ë£¹ì˜ í™”í•©ì„ ìœ„í•´ ì‘ì€ ìº í”„íŒŒì´ì–´ ìë¦¬ë¥¼ ë§ˆë ¨í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) íƒ€ì¸ì˜ ê³ í†µì„ ìì‹ ì˜ ê²ƒì²˜ëŸ¼ ëŠê»´ ê´´ë¡œì›Œí–ˆìŠµë‹ˆë‹¤.`, sanity: -5 },
            { text: `${name}ì€(ëŠ”) ë‚¯ì„  ìƒì¡´ìë¥¼ ë°œê²¬í•˜ê³  ê·¸ë¥¼ ê·¸ë£¹ì— ë°›ì•„ë“¤ì—¬ì•¼ í•œë‹¤ê³  ì„¤ë“í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ëª¨ë‘ì—ê²Œ ì—­í• ì„ ë¶€ì—¬í•˜ì—¬ ì†Œì†ê°ì„ ëŠë¼ê²Œ í–ˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ë¦¬ë”ì˜ ë¶€ë‹´ê° ë•Œë¬¸ì— ë‚¨ëª°ë˜ í˜ë“¤ì–´í–ˆìŠµë‹ˆë‹¤.`, sanity: -5 },
            { text: `${name}ì€(ëŠ”) ì£½ì€ ë™ë£Œë¥¼ ìœ„í•´ ì‘ì€ ì¥ë¡€ì‹ì„ ì¹˜ëŸ¬ì£¼ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì´ê¸°ì ì¸ í–‰ë™ì„ í•˜ëŠ” ì‚¬ëŒì—ê²Œ í¬ê²Œ ì‹¤ë§í–ˆìŠµë‹ˆë‹¤.`, sanity: -5 },
            // Added
            { text: `${name}ì€(ëŠ”) "ìš°ë¦° í•  ìˆ˜ ìˆì–´!"ë¼ë©° ëŠì„ì—†ì´ ê²©ë ¤í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ìì‹ ì˜ ì•ˆìœ„ë³´ë‹¤ ì§‘ë‹¨ì˜ ì´ìµì„ ìµœìš°ì„ ìœ¼ë¡œ ìƒê°í–ˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ë”°ëœ»í•œ ë§ í•œë§ˆë””ë¡œ ì–¼ì–´ë¶™ì€ ë¶„ìœ„ê¸°ë¥¼ ë…¹ì˜€ìŠµë‹ˆë‹¤.`, sanity: 5 }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },
    ENFP: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ë²„ë ¤ì§„ ì•…ê¸°ë¥¼ ë°œê²¬í•˜ê³  ì„œíˆ° ì—°ì£¼ë¥¼ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) ì¶©ë™ì ìœ¼ë¡œ ë‚¯ì„  ê±´ë¬¼ì— ë“¤ì–´ê°”ë‹¤ê°€ ëœ»ë°–ì˜ ë¬¼ìë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ ì•„í¬ì¹¼ë¦½ìŠ¤ ì´í›„ì˜ ì„¸ìƒì„ ê¸ì •ì ìœ¼ë¡œ ìƒìƒí•˜ë©° ì´ì•¼ê¸°í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) í•œ ê³³ì— ë¨¸ë¬´ë¥´ëŠ” ê²ƒì„ ë‹µë‹µí•´í•˜ë©° ìœ„í—˜í•œ ì •ì°°ì„ ìì²˜í–ˆìŠµë‹ˆë‹¤.`, hp: -5 },
            { text: `${name}ì€(ëŠ”) íŠ¹ì´í•œ ì¥ë‚œê°ì„ ì£¼ì›Œì™€ì„œ ëª¨ë‘ì—ê²Œ ë³´ì—¬ì£¼ë©° ì›ƒì—ˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ìš°ìš¸í•´í•˜ëŠ” ì¹œêµ¬ë¥¼ ìœ„í•´ ê¹œì§ ì´ë²¤íŠ¸ë¥¼ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) í˜¸ê¸°ì‹¬ì„ ì°¸ì§€ ëª»í•˜ê³  ê¸ˆì§€ëœ êµ¬ì—­ì— ë“¤ì–´ê°”ë‹¤ ì™”ìŠµë‹ˆë‹¤.`, hp: -2, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ ë¶„ì¥ì„ í•˜ê³  ë™ë£Œë¥¼ ë†€ë˜í‚¤ë‹¤ ë§ì„ ë»”í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) "ìš°ë¦° ë°˜ë“œì‹œ ì‚´ì•„ì„œ ë°”ë‹¤ë¥¼ ë³´ëŸ¬ ê°ˆ ê±°ì•¼!"ë¼ê³  ì™¸ì³¤ìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ê°ì • ê¸°ë³µì´ ì‹¬í•´ì ¸ì„œ ìš¸ë‹¤ê°€ ì›ƒë‹¤ê°€ í–ˆìŠµë‹ˆë‹¤.`, sanity: -5 },
            // Added
            { text: `${name}ì€(ëŠ”) ê¸°ë°œí•œ ì•„ì´ë””ì–´ë¡œ ê³ ì¥ ë‚œ ì¥ë¹„ë¥¼ ê³ ì³¤ìŠµë‹ˆë‹¤(ì•„ë§ˆë„ ìš´ìœ¼ë¡œ).`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ìƒˆë¡œìš´ ì‚¬ëŒì„ ë§Œë‚˜ìë§ˆì ì¹œêµ¬ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ìŸì•„ì§€ëŠ” ë¹„ë¥¼ ë§ìœ¼ë©° ì¶¤ì„ ì¶”ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },

    // Sentinels (ê´€ë¦¬ìí˜•)
    ISTJ: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ì¬ê³  ì¡°ì‚¬ë¥¼ ì² ì €íˆ í•˜ì—¬ ì‹ëŸ‰ì´ ë¶€ì¡±í•¨ì„ ì •í™•íˆ ì•Œë ¸ìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì •í•´ì§„ ìˆ˜ì¹™ëŒ€ë¡œ í•œì¹˜ì˜ ì˜¤ì°¨ë„ ì—†ì´ ê²½ê³„ ê·¼ë¬´ë¥¼ ì„°ìŠµë‹ˆë‹¤.`, sanity: 0 },
            { text: `${name}ì€(ëŠ”) ë¬´ì§ˆì„œí•˜ê³  ê³„íš ì—†ëŠ” ìƒí™©ì— ê·¹ì‹¬í•œ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.`, sanity: -5 },
            { text: `${name}ì€(ëŠ”) ê³¼ê±°ì˜ ê²½í—˜ì„ ë˜ì‚´ë ¤ ì˜¤ë˜ëœ ë°œì „ê¸°ë¥¼ ìˆ˜ë¦¬í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì•ˆì „ì´ í™•ì¸ëœ ê²½ë¡œë§Œì„ ê³ ì§‘í•˜ì—¬ ì´ë™ ì‹œê°„ì„ ì§€ì²´ì‹œì¼°ìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) íƒ„ì•½ ìˆ˜ë¥¼ í•˜ë‚˜í•˜ë‚˜ ì„¸ì–´ ì¥ë¶€ì— ê¸°ë¡í–ˆìŠµë‹ˆë‹¤.`, sanity: 2 },
            { text: `${name}ì€(ëŠ”) ì•½ì†ëœ ì‹œê°„ì„ ì§€í‚¤ì§€ ì•Šì€ ë™ë£Œì—ê²Œ ì”ì†Œë¦¬ë¥¼ í–ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ë¶€ì‹¤í•œ ë²½ì„ í•˜ë£¨ ì¢…ì¼ ë³´ê°• ê³µì‚¬í–ˆìŠµë‹ˆë‹¤.`, hp: -2, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ë§Œì•½ì˜ ì‚¬íƒœë¥¼ ëŒ€ë¹„í•´ í”Œëœ B, Cê¹Œì§€ ì„¸ì›Œë‘ì—ˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ê°ì •ì— íœ˜ë‘˜ë¦¬ì§€ ì•Šê³  ëƒ‰ì •í•˜ê²Œ ì¢€ë¹„ë¥¼ ì²˜ì¹˜í–ˆìŠµë‹ˆë‹¤.`, kill: 1 },
            // Added
            { text: `${name}ì€(ëŠ”) ìœ í†µê¸°í•œì´ ì§€ë‚œ ì•½í’ˆì„ ë¶„ë¥˜í•˜ì—¬ íê¸°í–ˆìŠµë‹ˆë‹¤.`, sanity: 2 },
            { text: `${name}ì€(ëŠ”) ì •í•´ì§„ ì‹ì‚¬ëŸ‰ì„ ì •í™•í•˜ê²Œ ë°°ë¶„í–ˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ííŠ¸ëŸ¬ì§„ ì§ì„ ë‹¤ì‹œ ì •ë¦¬í•˜ë©° ë§ˆìŒì˜ ì•ˆì •ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.`, sanity: 5 }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },
    ISFJ: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ë¶€ìƒë‹¹í•œ ë™ë£Œë“¤ì˜ ìƒì²˜ë¥¼ ì •ì„±ê» ì†Œë…í•˜ê³  ëŒë´¤ìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ëª¨ë‘ê°€ ì ë“  ì‚¬ì´ ì¡°ìš©íˆ ì£¼ë³€ì„ ì²­ì†Œí•˜ê³  ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ìƒì–´ë²„ë¦° ê°€ì¡±ì˜ ì‚¬ì§„ì„ ë³´ë©° ëˆˆë¬¼ì„ í˜ë ¸ìŠµë‹ˆë‹¤.`, sanity: -5 },
            { text: `${name}ì€(ëŠ”) êµ¬í•  ìˆ˜ ìˆëŠ” ì¬ë£Œë¡œ ë”°ëœ»í•œ ìŠ¤íŠœë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.`, hp: 5 },
            { text: `${name}ì€(ëŠ”) ìœ„ê¸°ì˜ ìˆœê°„ ìì‹ ì˜ ì•ˆìœ„ë³´ë‹¤ ë™ë£Œì˜ ë°©íŒ¨ê°€ ë˜ê¸°ë¥¼ ìì²˜í–ˆìŠµë‹ˆë‹¤.`, hp: -10 },
            { text: `${name}ì€(ëŠ”) ëª¨ë‘ì˜ ìƒì¼ì„ ê¸°ì–µí•˜ê³  ì‘ì€ ì„ ë¬¼ì„ ì±™ê²¨ì£¼ì—ˆìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) ê±°ì ˆì„ ëª»í•´ì„œ ìì‹ ì˜ ëª«ë³´ë‹¤ ë” ë§ì€ ì¼ì„ ë– ë§¡ì•˜ìŠµë‹ˆë‹¤.`, hp: -5, sanity: -2 },
            { text: `${name}ì€(ëŠ”) êµ¬ì„ì— í•€ ì•¼ìƒí™”ë¥¼ êº¾ì–´ í…Œì´ë¸”ì„ ì¥ì‹í–ˆìŠµë‹ˆë‹¤.`, sanity: 2 },
            { text: `${name}ì€(ëŠ”) ë‹¤íˆ° ì‚¬ëŒë“¤ ì‚¬ì´ì—ì„œ ëˆˆì¹˜ë¥¼ ë³´ë©° ì–´ì©” ì¤„ ëª°ë¼í–ˆìŠµë‹ˆë‹¤.`, sanity: -5 },
            { text: `${name}ì€(ëŠ”) ê³¼ê±°ì˜ í‰í™”ë¡œì› ë˜ ì‹œì ˆì„ íšŒìƒí•˜ë©° ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            // Added
            { text: `${name}ì€(ëŠ”) ë™ë£Œê°€ ì ë“¤ ë•Œê¹Œì§€ ê³ì—ì„œ ì§€ì¼œì£¼ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ìì‹ ì˜ ì‹ëŸ‰ì„ ëª°ë˜ ë°°ê³ í”ˆ ë™ë£Œ ê°€ë°©ì— ë„£ì–´ë‘ì—ˆìŠµë‹ˆë‹¤.`, hp: -2, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ëˆ„êµ°ê°€ì˜ ê±°ì¹œ ë§ì— ìƒì²˜ë°›ì•˜ì§€ë§Œ ë‚´ìƒ‰í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.`, sanity: -5 }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },
    ESTJ: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ìº í”„ì˜ ë³´ì•ˆ ìƒíƒœë¥¼ ì ê²€í•˜ê³  ì¦‰ê°ì ì¸ ë³´ê°• ê³µì‚¬ë¥¼ ì§€ì‹œí–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ê²Œìœ¼ë¦„ì„ í”¼ìš°ëŠ” ë™ë£Œì—ê²Œ ë”°ë”í•˜ê²Œ í›ˆê³„ë¥¼ í–ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) íš¨ìœ¨ì ì¸ ì¢€ë¹„ ì²˜ë¦¬ ë©”ë‰´ì–¼ì„ ë§Œë“¤ê³  í›ˆë ¨ì‹œì¼°ìŠµë‹ˆë‹¤.`, kill: 2 },
            { text: `${name}ì€(ëŠ”) ì „í†µì ì¸ ë°©ì‹ì˜ í›ˆì œ ë³´ì¡´ì‹ì„ ë§Œë“¤ì–´ ì‹ëŸ‰ì„ ë¹„ì¶•í–ˆìŠµë‹ˆë‹¤.`, hp: 5 },
            { text: `${name}ì€(ëŠ”) ê·¸ë£¹ì˜ ê·œìœ¨ì„ í™•ë¦½í•˜ê¸° ìœ„í•´ ê¸´ê¸‰ íšŒì˜ë¥¼ ì†Œì§‘í–ˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ì‹ëŸ‰ ë°°ê¸‰ ì›ì¹™ì„ ì—„ê²©í•˜ê²Œ ì ìš©í•˜ì—¬ ë¶ˆë§Œì„ ìƒ€ìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ì¡°ì§ì ì¸ ìˆ˜ìƒ‰ ì‘ì „ì„ í¼ì³ ë§ì€ ë¬¼ìë¥¼ í™•ë³´í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ê¶Œìœ„ì— ë„ì „í•˜ëŠ” ì‚¬ëŒê³¼ ì¶©ëŒí–ˆìŠµë‹ˆë‹¤.`, hp: -2, sanity: -5 },
            { text: `${name}ì€(ëŠ”) ëª¨ë‘ê°€ ì ë“  ìƒˆë²½, í™€ë¡œ ì¥ë¹„ ì ê²€ì„ ë§ˆì³¤ìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) "ìš°ë¦¬ëŠ” ì‚´ì•„ë‚¨ì•„ì•¼ í•  ì˜ë¬´ê°€ ìˆë‹¤"ê³  ê°•ì¡°í–ˆìŠµë‹ˆë‹¤.` },
            // Added
            { text: `${name}ì€(ëŠ”) ê°ì—¼ ì˜ˆë°© ìˆ˜ì¹™ì„ ì–´ê¸´ ì‚¬ëŒì„ ê²©ë¦¬ ì¡°ì¹˜í–ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ëª¨ë“  ê²°ì •ì— ì±…ì„ì„ ì§€ë©° ì•ì¥ì„°ìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) í˜¼ë€ìŠ¤ëŸ¬ìš´ ìƒí™©ì„ í†µì œí•˜ë©° ì§ˆì„œë¥¼ ë¶€ì—¬í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },
    ESFJ: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ìƒì¡´ìë“¤ì˜ ìƒì¼ì„ ê¸°ì–µí•´ë‚´ê³  ì‘ê²Œë‚˜ë§ˆ ì¶•í•˜í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) ëª¨ë‘ì˜ ìƒíƒœë¥¼ ì¼ì¼ì´ í™•ì¸í•˜ë©° ì•ˆë¶€ë¥¼ ë¬¼ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ê·¸ë£¹ ë‚´ì˜ ë¶ˆí™”ë¥¼ ì ì¬ìš°ê¸° ìœ„í•´ ë™ë¶„ì„œì£¼í–ˆìŠµë‹ˆë‹¤.`, sanity: -5 },
            { text: `${name}ì€(ëŠ”) ëˆ„êµ°ê°€ ìì‹ ì„ ì†Œì™¸ì‹œí‚¨ë‹¤ê³  ëŠê»´ ìš°ìš¸í•´í–ˆìŠµë‹ˆë‹¤.`, sanity: -5 },
            { text: `${name}ì€(ëŠ”) ë³´ê¸‰í’ˆì„ ê³µí‰í•˜ê²Œ ë‚˜ëˆ„ì–´ ì£¼ë©° ë¶ˆë§Œì„ ì ì¬ì› ìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ë¹¨ë˜ë¥¼ ëª¨ì•„ ì„¸íƒí•˜ë©° ìœ„ìƒì„ ê´€ë¦¬í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) í˜ë“¤ì–´í•˜ëŠ” ë™ë£Œì˜ ì†ì„ ì¡ê³  ëê¹Œì§€ ë“¤ì–´ì£¼ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì‚¬ì†Œí•œ ì†Œë¬¸ì„ í¼ëœ¨ë ¤ ë¶„ìœ„ê¸°ë¥¼ ë¬˜í•˜ê²Œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ëª¨ë‘ê°€ ëª¨ì—¬ ì‹ì‚¬í•˜ëŠ” ì‹œê°„ì„ ì¤‘ìš”í•˜ê²Œ ì—¬ê²¼ìŠµë‹ˆë‹¤.`, hp: 2 },
            { text: `${name}ì€(ëŠ”) "ìš°ë¦¬ ëª¨ë‘ ë‹¤ ê°™ì´ ì‚´ì•„ì•¼ í•´"ë¼ë©° íŒ€ì›Œí¬ë¥¼ ê°•ì¡°í–ˆìŠµë‹ˆë‹¤.` },
            // Added
            { text: `${name}ì€(ëŠ”) ë§›ì—†ëŠ” ë¹„ìƒì‹ëŸ‰ì„ ì–´ë–»ê²Œë“  ë§›ìˆê²Œ ìš”ë¦¬í•˜ë ¤ ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ê·¸ë£¹ì˜ ì‚¬ê¸°ë¥¼ ìœ„í•´ ì¬ë¯¸ìˆëŠ” ì´ì•¼ê¸°ë¥¼ ì£¼ë„í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ëˆ„êµ°ê°€ê°€ ìì‹ ì„ ì‹«ì–´í• ê¹Œ ë´ ì „ì „ê¸ê¸í–ˆìŠµë‹ˆë‹¤.`, sanity: -2 }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },

    // Explorers (íƒí—˜ê°€í˜•)
    ISTP: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ê³ ì¥ë‚œ ì°¨ëŸ‰ì„ ìˆ˜ë¦¬í•˜ì—¬ ì´ë™ ìˆ˜ë‹¨ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) ì‡ íŒŒì´í”„ë¥¼ ê¹ì•„ ë‚ ì¹´ë¡œìš´ ì°½ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.`, kill: 1 },
            { text: `${name}ì€(ëŠ”) í˜¼ì ì •ì°°ì„ ë‚˜ê°”ë‹¤ê°€ ì¢€ë¹„ ë¬´ë¦¬ë¥¼ ë”°ëŒë¦¬ê³  ë¬´ì‚¬íˆ ëŒì•„ì™”ìŠµë‹ˆë‹¤.`, hp: -2, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ë³µì¡í•œ ê°ì • ì‹¸ì›€ì— íœ˜ë§ë¦¬ê¸° ì‹«ì–´ ìë¦¬ë¥¼ í”¼í–ˆìŠµë‹ˆë‹¤.`, sanity: 2 },
            { text: `${name}ì€(ëŠ”) ìœ„ê¸°ì˜ ìˆœê°„ ë†€ë¼ìš´ ë°˜ì‚¬ì‹ ê²½ìœ¼ë¡œ ì¢€ë¹„ì˜ ë¨¸ë¦¬ë¥¼ ë‚ ë ¸ìŠµë‹ˆë‹¤.`, kill: 3 },
            { text: `${name}ì€(ëŠ”) ê°€ì¥ íš¨ìœ¨ì ì¸ ì‚´ìƒ ë°©ë²•ì„ ì—°êµ¬í–ˆìŠµë‹ˆë‹¤.`, kill: 2 },
            { text: `${name}ì€(ëŠ”) ë§ì—†ì´ êµ¬ì„ì—ì„œ ê³ ì¥ ë‚œ ë¼ë””ì˜¤ë¥¼ ê³ ì³¤ìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì§€ë£¨í•¨ì„ ì°¸ì§€ ëª»í•˜ê³  í˜¼ì ìœ„í—˜í•œ ìŠ¤í„´íŠ¸ë¥¼ ê°í–‰í–ˆìŠµë‹ˆë‹¤.`, hp: -5 },
            { text: `${name}ì€(ëŠ”) ìƒí™©ì„ ë¶„ì„í•˜ê¸°ë³´ë‹¤ ëª¸ìœ¼ë¡œ ë¶€ë”ªí˜€ í•´ê²°í–ˆìŠµë‹ˆë‹¤.`, kill: 1 },
            { text: `${name}ì€(ëŠ”) í•„ìš”í•œ ë§ë§Œ ê³¨ë¼ì„œ í•˜ì—¬ ì—ë„ˆì§€ë¥¼ ì•„ê¼ˆìŠµë‹ˆë‹¤.` },
            // Added
            { text: `${name}ì€(ëŠ”) ë¹ˆ ë³‘ì„ ì´ìš©í•´ ì†ŒìŒê¸°ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.`, kill: 1 },
            { text: `${name}ì€(ëŠ”) ë‹«íŒ ê¸ˆê³ ë¥¼ ì˜·í•€ í•˜ë‚˜ë¡œ ì—´ì–´ ì‚¬ëŒë“¤ì„ ë†€ë¼ê²Œ í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ë§¨ì†ìœ¼ë¡œ ë¬¼ê³ ê¸°ë¥¼ ì¡ì•„ì™€ ì €ë… ê±°ë¦¬ë¥¼ ë§ˆë ¨í–ˆìŠµë‹ˆë‹¤.`, hp: 5 }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },
    ISFP: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ë²½ì— ê·¸ë¦¼ì„ ê·¸ë¦¬ë©° ì‚­ë§‰í•œ ê³³ì—ì„œ ë§ˆìŒì˜ í‰í™”ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) ê°‘ìê¸° ë‚˜íƒ€ë‚œ ì¢€ë¹„ì—ê²Œì„œ ìˆ¨ë§‰íˆëŠ” ì€ì‹  ëŠ¥ë ¥ì„ ë³´ì—¬ì£¼ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ìˆ²ì†ì—ì„œ ë¨¹ì„ ìˆ˜ ìˆëŠ” ì—´ë§¤ë¥¼ ì°¾ì•„ì™”ìŠµë‹ˆë‹¤.`, hp: 5 },
            { text: `${name}ì€(ëŠ”) ê³„ì†ë˜ëŠ” ê°ˆë“± ìƒí™©ì„ ê²¬ë””ì§€ ëª»í•˜ê³  ë›°ì³ë‚˜ê°ˆ ë»”í–ˆìŠµë‹ˆë‹¤.`, sanity: -10 },
             { text: `${name}ì€(ëŠ”) ${p}ì˜ ë…íŠ¹í•œ ê°ê°ìœ¼ë¡œ ì£¼ë³€ ì§€í˜•ì§€ë¬¼ì„ ì´ìš©í•œ ìœ„ì¥ë§‰ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.` },
             { text: `${name}ì€(ëŠ”) ë‹¤ì¹œ ì‚¬ìŠ´ì„ ë°œê²¬í•˜ê³  ì¹˜ë£Œí•´ì£¼ë ¤ ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
             { text: `${name}ì€(ëŠ”) ë¬´ê¸°ë¥¼ ì•„ë¦„ë‹µê²Œ ì¥ì‹í•˜ë©° ì‹œê°„ì„ ë³´ëƒˆìŠµë‹ˆë‹¤.`, sanity: 2 },
             { text: `${name}ì€(ëŠ”) ì•„ë¬´ë„ ëª¨ë¥´ê²Œ ì¢€ë¹„ í•œ ë§ˆë¦¬ë¥¼ ì¡°ìš©íˆ ì²˜ì¹˜í–ˆìŠµë‹ˆë‹¤.`, kill: 1 },
             { text: `${name}ì€(ëŠ”) ìŸì•„ì§€ëŠ” ë³„ì„ ë³´ë©° ëˆˆë¬¼ì„ í˜ë ¸ìŠµë‹ˆë‹¤.`, sanity: 5 },
             { text: `${name}ì€(ëŠ”) ìì‹ ì˜ ê°€ì¹˜ê´€ì— ì–´ê¸‹ë‚˜ëŠ” ëª…ë ¹ì„ ê±°ë¶€í–ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
             // Added
             { text: `${name}ì€(ëŠ”) ë™ë¬¼ì˜ ë¼ˆë¡œ ì‘ì€ ì¥ì‹ êµ¬ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.`, sanity: 2 },
             { text: `${name}ì€(ëŠ”) ì˜ˆê¸°ì¹˜ ëª»í•œ ìˆœê°„ì— ìš©ê¸°ë¥¼ ë°œíœ˜í•´ ë™ë£Œë¥¼ êµ¬í–ˆìŠµë‹ˆë‹¤.`, hp: -5, sanity: 5 },
             { text: `${name}ì€(ëŠ”) ì¡°ìš©íˆ ì½§ë…¸ë˜ë¥¼ í¥ì–¼ê±°ë ¤ ì£¼ë³€ì„ ì•ˆì‹¬ì‹œì¼°ìŠµë‹ˆë‹¤.` }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },
    ESTP: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ìœ„í—˜í•œ ìƒí™©ì„ ì¦ê¸°ë©° ì¢€ë¹„ì™€ ì¶”ê²©ì „ì„ ë²Œì˜€ìŠµë‹ˆë‹¤.`, hp: -10, kill: 2 },
            { text: `${name}ì€(ëŠ”) ëˆ„ê°€ ë” ë§ì€ ì¢€ë¹„ë¥¼ ì¡ë‚˜ ë‚´ê¸°ë¥¼ ê±¸ì–´ ì‹ëŸ‰ì„ ë”°ëƒˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì§ê´€ì ì¸ íŒë‹¨ìœ¼ë¡œ ë¬´ë„ˆì§€ëŠ” ê±´ë¬¼ì—ì„œ ê°€ì¥ ë¨¼ì € íƒˆì¶œí–ˆìŠµë‹ˆë‹¤.`, hp: -2 },
            { text: `${name}ì€(ëŠ”) ë‹µë‹µí•¨ì„ ì°¸ì§€ ëª»í•˜ê³  ì˜¤í† ë°”ì´ë¥¼ ì°¾ì•„ ì£¼ë³€ì„ ì§ˆì£¼í–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì¦‰ì„ì—ì„œ í™”ì—¼ë³‘ì„ ë§Œë“¤ì–´ ì¢€ë¹„ ë¬´ë¦¬ì— ë˜ì ¸ë²„ë ¸ìŠµë‹ˆë‹¤.`, kill: 5 },
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ ë–¼ í•œê°€ìš´ë°ë¡œ ë›°ì–´ë“¤ì–´ ë¬´ìŒì„ ì°ì—ˆìŠµë‹ˆë‹¤.`, hp: -20, kill: 10 },
            { text: `${name}ì€(ëŠ”) ìš°ì—°íˆ ë°œê²¬í•œ ìˆ ì„ ë§ˆì‹œë©° í˜¸íƒ•í•˜ê²Œ ì›ƒì—ˆìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) ê³„íšë³´ë‹¤ëŠ” ì„ê¸°ì‘ë³€ìœ¼ë¡œ ìœ„ê¸°ë¥¼ ëª¨ë©´í–ˆìŠµë‹ˆë‹¤.`, sanity: 2 },
            { text: `${name}ì€(ëŠ”) ì§€ë£¨í•˜ë‹¤ë©° ìœ„í—˜í•œ ì‚¬ê²© ì—°ìŠµì„ ì œì•ˆí–ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) í˜‘ìƒë³´ë‹¤ëŠ” ì£¼ë¨¹ì´ ë¹ ë¥´ë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì£¼ì—ˆìŠµë‹ˆë‹¤.`, hp: -5 },
            // Added
            { text: `${name}ì€(ëŠ”) ë²„ë ¤ì§„ ìŠ¤í¬ì¸ ì¹´ë¥¼ ë°œê²¬í•˜ê³  í™˜í˜¸ì„±ì„ ì§ˆë €ìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ë²Œë ˆë¥¼ ì¡ì•„ë¨¹ëŠ” ë‚´ê¸°ë¥¼ í•˜ì—¬ ì‚¬ëŒë“¤ì„ ê²½ì•…í•˜ê²Œ í–ˆìŠµë‹ˆë‹¤.`, sanity: 2 },
            { text: `${name}ì€(ëŠ”) ìœ„í—˜í•œ êµ¬ì—­ì— ê°€ì¥ ë¨¼ì € ë›°ì–´ë“¤ì—ˆìŠµë‹ˆë‹¤.`, hp: -5 }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    },
    ESFP: (name, gender) => {
        const p = getPronoun(gender);
        const actions = [
            // Existing
            { text: `${name}ì€(ëŠ”) ì¶¤ê³¼ ë…¸ë˜ë¡œ ì¹™ì¹™í•œ ìº í”„ì˜ ë¶„ìœ„ê¸°ë¥¼ ë°˜ì „ì‹œì¼°ìŠµë‹ˆë‹¤.`, sanity: 10 },
            { text: `${name}ì€(ëŠ”) ì¶©ë™ì ìœ¼ë¡œ ë‹«íŒ ë¬¸ì„ ì—´ì—ˆë‹¤ê°€ ì¢€ë¹„ë¥¼ ë§ˆì£¼ì³¤ìŠµë‹ˆë‹¤.`, hp: -10, sanity: -5 },
            { text: `${name}ì€(ëŠ”) ë°±í™”ì  íí—ˆì—ì„œ í™”ë ¤í•œ ì˜·ì„ ë°œê²¬í•˜ê³  ì…ì–´ë³´ë©° ì¦ê±°ì›Œí–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ëª¨ë‘ì˜ ì£¼ëª©ì„ ë°›ìœ¼ë©° ìš©ê°í•˜ê²Œ ì†Œë¦¬ë¥¼ ì§ˆëŸ¬ ì¢€ë¹„ë¥¼ ìœ ì¸í–ˆìŠµë‹ˆë‹¤.`, hp: -5, kill: 1 },
            { text: `${name}ì€(ëŠ”) í˜„ì¬ì˜ ìˆœê°„ì— ì§‘ì¤‘í•˜ë©° ìœ í†µê¸°í•œì´ ë‚¨ì€ ë§›ìˆëŠ” í†µì¡°ë¦¼ì„ ë°œê²¬í•´ í™˜í˜¸í–ˆìŠµë‹ˆë‹¤.` },
            { text: `${name}ì€(ëŠ”) ë¬´ì„œìš´ ì´ì•¼ê¸°ë¥¼ ì‹¤ê° ë‚˜ê²Œ í•´ì„œ ëª¨ë‘ë¥¼ ê³µí¬ì— ë–¨ê²Œ í–ˆìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ìš°ì—°íˆ ë°œê²¬í•œ í™”ì¥í’ˆìœ¼ë¡œ ì¹˜ì¥í•˜ë©° ì¦ê±°ì›Œí–ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ì‹¬ê°í•œ íšŒì˜ ì‹œê°„ì— ë”´ì²­ì„ í”¼ìš°ë‹¤ ì§€ì ë°›ì•˜ìŠµë‹ˆë‹¤.`, sanity: -2 },
            { text: `${name}ì€(ëŠ”) ì¢€ë¹„ í‰ë‚´ë¥¼ ë‚´ë©° ì¥ë‚œì¹˜ë‹¤ê°€ ì§„ì§œ ì¢€ë¹„ì—ê²Œ ë“¤í‚¬ ë»”í–ˆìŠµë‹ˆë‹¤.`, hp: -2, sanity: -5 },
            { text: `${name}ì€(ëŠ”) íŒŒí‹°ë¥¼ ì—´ìê³  ì œì•ˆí•˜ë©° ìˆ¨ê²¨ë‘” ê³¼ìë¥¼ êº¼ëƒˆìŠµë‹ˆë‹¤.`, sanity: 10 },
            // Added
            { text: `${name}ì€(ëŠ”) ê·¸ë¦¼ì ë†€ì´ë¡œ ì•„ì´ë“¤ì„ ì¦ê²ê²Œ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.`, sanity: 5 },
            { text: `${name}ì€(ëŠ”) ê±°ìš¸ì´ ì—†ë‹¤ë©° ë¶ˆí‰í–ˆì§€ë§Œ ê¸ˆì„¸ ì›ƒì–´ë„˜ê²¼ìŠµë‹ˆë‹¤.`, sanity: 2 },
            { text: `${name}ì€(ëŠ”) ë¶„ìœ„ê¸° ë©”ì´ì»¤ ì—­í• ì„ í†¡í†¡íˆ í•´ëƒˆìŠµë‹ˆë‹¤.` }
        ];
        return actions[Math.floor(Math.random() * actions.length)];
    }
};

export const simulateDay = async (
  day: number,
  characters: Character[]
): Promise<SimulationResult> => {
  // 1. Filter living characters
  const livingCharacters = characters.filter(c => c.status !== 'Dead' && c.status !== 'Missing');
  
  if (livingCharacters.length === 0) {
    return {
      narrative: "ì¹¨ë¬µì´ ìº í”„ì— ë‚´ë ¤ì•‰ì•˜ìŠµë‹ˆë‹¤. ìƒì¡´ìê°€ ë” ì´ìƒ ì—†ìŠµë‹ˆë‹¤.",
      events: ["ê²Œì„ ì˜¤ë²„."],
      updates: []
    };
  }

  // 2. Generate Global Narrative
  const narrative = GLOBAL_EVENTS[Math.floor(Math.random() * GLOBAL_EVENTS.length)];
  const events: string[] = [];
  const updates: CharacterUpdate[] = [];

  // Helper to find or create update
  const getUpdate = (id: string) => {
    let u = updates.find(up => up.id === id);
    if (!u) {
        u = { id };
        updates.push(u);
    }
    return u;
  };

  // 3. Process Individual Events
  const shuffledChars = [...livingCharacters].sort(() => Math.random() - 0.5);

  shuffledChars.forEach(char => {
      // Chance to do nothing significant
      if (Math.random() > 0.8) return;

      // Execute MBTI specific action
      const action = MBTI_SPECIFIC_ACTIONS[char.mbti](char.name, char.gender);
      
      const update = getUpdate(char.id);
      update.hpChange = (update.hpChange || 0) + (action.hp || 0);
      update.sanityChange = (update.sanityChange || 0) + (action.sanity || 0);
      update.killCountChange = (update.killCountChange || 0) + (action.kill || 0);

      // Check for death logic
      const currentHp = char.hp + (update.hpChange || 0);
      if (currentHp <= 0) {
          update.status = 'Dead';
          update.hpChange = -char.hp;
          events.push(`ğŸ’€ ${action.text} ê·¸ë¦¬ê³ ... ${char.name}ì€(ëŠ”) ìˆ¨ì„ ê±°ë‘ì—ˆìŠµë‹ˆë‹¤.`);
      } else {
          events.push(action.text);
      }
  });

  // 4. Generate Interactions
  if (livingCharacters.length > 1) {
      const actorIndex = Math.floor(Math.random() * livingCharacters.length);
      let targetIndex = Math.floor(Math.random() * livingCharacters.length);
      while (actorIndex === targetIndex) {
          targetIndex = Math.floor(Math.random() * livingCharacters.length);
      }

      const actor = livingCharacters[actorIndex];
      const target = livingCharacters[targetIndex];
      
      const isLover = actor.relationshipStatuses[target.id] === 'Lover';
      const isEx = actor.relationshipStatuses[target.id] === 'Ex';
      const affinity = actor.relationships[target.id] || 0;

      // Logic Decision Tree
      let triggeredEvent = '';
      let affinityChange = 0;
      let newStatus: 'Lover' | 'Ex' | undefined = undefined;

      // 4-1. Breakup Check (Only if Lover + Low Score or Bad Luck)
      if (isLover && (affinity < 40 || Math.random() < 0.1)) {
           triggeredEvent = BREAKUP_EVENTS[Math.floor(Math.random() * BREAKUP_EVENTS.length)](actor.name, target.name);
           affinityChange = -30;
           newStatus = 'Ex';
           events.push(`ğŸ’” ${triggeredEvent}`);
      }
      // 4-2. Lover Event (If Lover)
      else if (isLover) {
           triggeredEvent = LOVER_EVENTS[Math.floor(Math.random() * LOVER_EVENTS.length)](actor.name, target.name);
           affinityChange = 5;
           events.push(`ğŸ’• ${triggeredEvent}`);
      }
      // 4-3. Confession Check (Not Lover, Not Ex, High Score)
      else if (!isLover && !isEx && affinity >= 70 && Math.random() < 0.4) {
           // 50% Success Rate (simplified)
           if (Math.random() > 0.5) {
               triggeredEvent = CONFESSION_EVENTS[Math.floor(Math.random() * CONFESSION_EVENTS.length)](actor.name, target.name);
               affinityChange = 10;
               newStatus = 'Lover';
               events.push(`ğŸ’˜ ${triggeredEvent}`);
           } else {
               events.push(`ğŸ’¬ ${actor.name}ì€(ëŠ”) ${target.name}ì—ê²Œ ê³ ë°±í•˜ë ¤ í–ˆì§€ë§Œ, íƒ€ì´ë°ì„ ë†“ì³ ì–´ìƒ‰í•´ì¡ŒìŠµë‹ˆë‹¤.`);
               affinityChange = -5;
           }
      }
      // 4-4. Standard Interaction
      else {
           // Determine compatibility
           const getGroup = (m: MBTI) => {
              if (ANALYSTS.includes(m)) return 'ANALYST';
              if (DIPLOMATS.includes(m)) return 'DIPLOMAT';
              if (SENTINELS.includes(m)) return 'SENTINEL';
              return 'EXPLORER';
           };
           const isCompatible = getGroup(actor.mbti) === getGroup(target.mbti);
           affinityChange = isCompatible ? 15 : (Math.random() > 0.5 ? 10 : -10);

           let interactionText = "";
           if (affinityChange > 0) {
               const templates = INTERACTION_TEMPLATES.POSITIVE;
               interactionText = templates[Math.floor(Math.random() * templates.length)](actor.name, target.name);
           } else {
               const templates = INTERACTION_TEMPLATES.NEGATIVE;
               interactionText = templates[Math.floor(Math.random() * templates.length)](actor.name, target.name);
           }
           events.push(`ğŸ¤ ${interactionText}`);
      }

      // Apply Updates Bidirectionally
      const actorUpdate = getUpdate(actor.id);
      if (!actorUpdate.relationshipUpdates) actorUpdate.relationshipUpdates = [];
      actorUpdate.relationshipUpdates.push({ targetId: target.id, change: affinityChange, newStatus });

      const targetUpdate = getUpdate(target.id);
      if (!targetUpdate.relationshipUpdates) targetUpdate.relationshipUpdates = [];
      targetUpdate.relationshipUpdates.push({ targetId: actor.id, change: affinityChange, newStatus });
  }

  // Artificial delay to simulate "processing"
  await new Promise(resolve => setTimeout(resolve, 800));

  return {
      narrative,
      events,
      updates
  };
};